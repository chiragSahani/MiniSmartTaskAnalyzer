<!DOCTYPE html>
<html lang="en">

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Task Analyzer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    {% load static %}
    <link rel="stylesheet" href="{% static 'tasks/style.css' %}">
</head>

<body>
    <div class="app-layout">
        <!-- Navbar -->
        <nav class="navbar">
            <a href="#" class="brand">
                <div class="brand-icon">
                    <i class="ph ph-check-square" style="font-size: 24px;"></i>
                </div>
                Smart Task Analyzer
            </a>
            <div class="nav-actions">
                <a href="https://github.com/chiragSahani/MiniSmartTaskAnalyzer" target="_blank"
                    class="btn btn-secondary btn-sm">
                    <i class="ph ph-github-logo"></i> View on GitHub
                </a>
            </div>
        </nav>

        <div class="container">
            <div class="main-grid">
                <!-- Left Column: Input -->
                <aside class="input-column">
                    <div class="card">
                        <div class="tabs-nav">
                            <button class="tab-btn active" data-tab="single"><i class="ph ph-plus"></i> New
                                Task</button>
                            <button class="tab-btn" data-tab="bulk"><i class="ph ph-upload-simple"></i> Bulk
                                Import</button>
                        </div>

                        <div id="single-tab" class="tab-pane active">
                            <form id="single-task-form" class="form-stack">
                                <div class="form-group">
                                    <label for="title">Task Title</label>
                                    <input type="text" id="title" name="title" class="form-control" required
                                        placeholder="What needs to be done?">
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="due_date">Due Date</label>
                                        <input type="date" id="due_date" name="due_date" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="estimated_hours">Est. Hours</label>
                                        <input type="number" id="estimated_hours" name="estimated_hours"
                                            class="form-control" step="0.1" min="0" required placeholder="2.0">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="importance">Importance (1-10)</label>
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <input type="range" id="importance" name="importance" min="1" max="10" value="5"
                                            style="flex:1" oninput="this.nextElementSibling.value = this.value">
                                        <output style="font-weight: 600; color: var(--primary); width: 20px;">5</output>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="dependencies">Dependencies (IDs)</label>
                                    <input type="text" id="dependencies" name="dependencies" class="form-control"
                                        placeholder="e.g., 1, 2">
                                </div>

                                <div class="form-group">
                                    <label for="id">Task ID (Optional)</label>
                                    <input type="number" id="id" name="id" class="form-control"
                                        placeholder="Auto-generated if empty">
                                </div>

                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="ph ph-plus-circle" style="font-size: 1.1em;"></i>
                                    Add Task
                                </button>
                            </form>
                        </div>

                        <div id="bulk-tab" class="tab-pane">
                            <div class="form-stack">
                                <div class="form-group">
                                    <label for="bulk-json">Paste JSON Array</label>
                                    <textarea id="bulk-json" class="form-control"
                                        placeholder='[{"title": "Task A", "importance": 8, "estimated_hours": 2}]'></textarea>
                                </div>
                                <button id="load-bulk-btn" class="btn btn-secondary btn-block"><i
                                        class="ph ph-download-simple"></i> Load JSON</button>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Right Column: List & Analysis -->
                <main class="content-column">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Task Queue</h2>
                            <div class="actions">
                                <button id="clear-tasks-btn" class="btn btn-ghost" title="Clear All">
                                    <i class="ph ph-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div id="task-staging-area" class="task-list">
                            <div class="empty-state">
                                <i class="ph ph-clipboard-text"
                                    style="font-size: 48px; color: var(--text-muted); margin-bottom: 1rem;"></i>
                                <p>Your task list is empty.</p>
                                <small>Add tasks from the left panel to get started.</small>
                            </div>
                        </div>

                        <div class="mt-4" style="border-top: 1px solid var(--border); padding-top: 1.5rem;">
                            <div class="form-row" style="align-items: flex-end;">
                                <div class="form-group" style="flex: 2;">
                                    <label for="strategy">Prioritization Strategy</label>
                                    <select id="strategy" class="form-control">
                                        <option value="smart_balance">Smart Balance (Recommended)</option>
                                        <option value="fastest_wins">Fastest Wins (Low Effort)</option>
                                        <option value="high_impact">High Impact (Importance)</option>
                                        <option value="deadline_driven">Deadline Driven</option>
                                    </select>
                                </div>
                                <button id="analyze-btn" class="btn btn-primary" style="flex: 1;">
                                    <i class="ph ph-lightning"></i> Analyze & Prioritize
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Results -->
                    <div id="results-area" class="results-wrapper hidden">
                        <div class="col-main">
                            <h3 style="margin-bottom: 1rem; font-weight: 600;">Prioritized Plan</h3>
                            <div id="analyzed-list" class="task-list"></div>
                        </div>
                        <div class="col-side">
                            <div class="suggestion-box">
                                <h3>
                                    <i class="ph ph-star"
                                        style="margin-right: 0.5rem; vertical-align: text-bottom;"></i>
                                    Top 3 Focus
                                </h3>
                                <div id="suggestions-list" class="mini-list"></div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    <script src="{% static 'tasks/app.js' %}"></script>
</body>

</html>